/*
 *	Title:		jquery.one-hot-minute (oneHotMinute)
 *	Homepage:	https://github.com/benichu/jquery.one-hot-minute
 *	Build:		1.0.0-20122412
 *	Copyright:	(c)2012: Benjamin Thouret <ben@2ret.com>
 *	License:	MIT, https://github.com/benichu/jquery.one-hot-minute/LICENSE-MIT
 *
 */
jQuery(function(){return $.oneHotMinute=function(e,t){var n,r,i,s,o=this;return i="waiting",this.settings={},this.$element=$(e),this.setState=function(e){return i=e},this.getState=function(){return i},this.getSetting=function(e){return this.settings[e]},this.callSettingFunction=function(e,t){return t==null&&(t=[]),this.settings[e].apply(this,t)},r=function(e){var t,r,i,s,u;return n("applying minutesToHours"),i=parseInt(e.attr(o.settings.dataAttr)||0),u=i<0?"-":"",i=Math.abs(i),t=Math.floor(i/60),r=i%60,r=o.zeroFill(r,2),s=u+t+"h"+r,e.attr("value")!=null?e.attr("value",s):e.html(s)},s=function(e){return n("valueToMinutes")},this.zeroFill=function(e,t){return e==null&&(e=""),t-=e.toString().length,t>0?(new Array(t+(/\./.test(e)?2:1))).join("0")+e:e+""},n=function(e){if(o.settings.debug)return typeof console!="undefined"&&console!==null?console.log(e):void 0},this.init=function(){var e,i;this.settings=$.extend({},this.defaults,t),this.setState("waiting");if(this.$element.length){n("Element is defined."),n("processableElements: "+this.settings.processableElements),this.$processableElements=this.$element.find(this.settings.processableElements.toString()),i=this.settings,e=this,n("processMethod: "+this.settings.processMethod);switch(this.settings.processMethod){case"minutesToHours":this.$processableElements.each(function(){return r($(this))}),this.setState("ready");break;case"valueToMinutes":this.$processableElements.each(function(){return s($(this))}),this.setState("ready");break;default:this.setState("error")}return this.getState()==="ready"?this.callSettingFunction("onReady",[this.$element]):this.callSettingFunction("onError",[this.$element])}},this.init(),this},$.oneHotMinute.prototype.defaults={debug:!1,processMethod:"minutesToHours",processableElements:["span","input"],dataAttr:"data-minute",saveAttr:"data-minute",onReady:function(){},onError:function(){}},$.fn.oneHotMinute=function(e){return this.each(function(){var t;if($(this).data("oneHotMinute")===void 0)return t=new $.oneHotMinute(this,e),$(this).data("oneHotMinute",t)})}});